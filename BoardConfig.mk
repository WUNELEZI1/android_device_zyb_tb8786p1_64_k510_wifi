# ==============================================
# ZYBPAD ZPD1321 (tb8786p1_64_k510_wifi) TWRP配置
# 基于fastboot getvar all + MTKClient提取的真实数据
# ==============================================

# 基础架构配置
TARGET_DEVICE := tb8786p1_64_k510_wifi
BOARD_PLATFORM := mt6768  # MT8786=MT6768平板版，驱动通用
PLATFORM_SDK_VERSION := 31  # Android 12 (SP1A.210812.016)
PLATFORM_VERSION := 12
TARGET_ARCH := arm64
TARGET_ARCH_VARIANT := armv8-a
TARGET_CPU_ABI := arm64-v8a
TARGET_CPU_ABI2 :=
TARGET_CPU_VARIANT := generic

# 分区大小（从fastboot日志提取，十六进制转十进制）
BOARD_BOOTIMAGE_PARTITION_SIZE := 33554432        # boot_a/b: 0x2000000 = 32MB
BOARD_VENDOR_BOOTIMAGE_PARTITION_SIZE := 67108864  # vendor_boot_a/b: 0x4000000 = 64MB
BOARD_SUPER_PARTITION_SIZE := 10737418240         # super: 0x280000000 = 10GB
BOARD_USERDATAIMAGE_PARTITION_SIZE := 238418575360 # userdata: 0x37814F8000 = 222GB
BOARD_DTBOIMAGE_PARTITION_SIZE := 8388608          # dtbo_a/b: 0x800000 = 8MB
BOARD_VBMETAIMAGE_PARTITION_SIZE := 8388608        # vbmeta_a/b: 0x800000 = 8MB

# 内核/ramdisk配置（MT6768通用）
BOARD_KERNEL_PAGESIZE := 4096
BOARD_KERNEL_BASE := 0x40078000
BOARD_KERNEL_OFFSET := 0x00008000
BOARD_RAMDISK_OFFSET := 0x11000000
BOARD_KERNEL_CMDLINE := bootopt=64S3,32N2,64N2 androidboot.selinux=permissive
BOARD_KERNEL_IMAGE_NAME := Image.gz-dtb

# 超级分区配置（动态分区适配）
BOARD_SUPER_PARTITION_GROUPS := main
BOARD_MAIN_SIZE := 10737418240
BOARD_MAIN_PARTITION_LIST := system vendor product system_ext

# 文件系统适配（userdata是F2FS，从MTKClient日志提取）
BOARD_USERDATA_FILE_SYSTEM_TYPE := f2fs
BOARD_HAS_LARGE_FILESYSTEM := true
SUPPORT_F2FS := true
SUPPORT_EXT4 := true

# AVB验证禁用（设备已解锁，必须关）
BOARD_AVB_ENABLE := false
BOARD_AVB_MAKE_VBMETA_IMAGE := false
BOARD_VBMETA_DISABLE_VERITY := true
BOARD_VBMETA_DISABLE_VERIFICATION := true

# Recovery界面配置
TARGET_RECOVERY_PIXEL_FORMAT := "RGBX_8888"
BOARD_HAS_NO_SELECT_BUTTON := true
TARGET_RECOVERY_FSTAB := device/zyb/tb8786p1_64_k510_wifi/recovery.fstab
BOARD_SUPPORTS_FLASH_FROM_STORAGE := true
BOARD_RECOVERY_SWIPE := true
BOARD_USES_RECOVERY_AS_BOOT := true

# MTK芯片专属配置
BOARD_MTK_PLATFORM := mt6768
BOARD_HAS_MTK_HARDWARE := true
MTK_PLATFORM := mt6768

# 设备树文件路径（后续会放你的dtb文件）
TARGET_KERNEL_DTB := device/zyb/tb8786p1_64_k510_wifi/dtb/mt6768.dtb